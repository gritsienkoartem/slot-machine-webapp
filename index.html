<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–°–ª–æ—Ç –º–∞—à–∏–Ω–∞</title>
<style>
  body { font-family: sans-serif; text-align: center; background: #222; color: #fff; }
  #slots { display: flex; justify-content: center; margin: 20px; }
  .slot { width: 80px; height: 80px; margin: 0 5px; font-size: 50px; line-height: 80px; border: 2px solid #fff; border-radius: 10px; background: #333; }
  #spinBtn { padding: 10px 30px; font-size: 20px; cursor: pointer; margin-top: 20px; }
  #result { margin-top: 20px; font-size: 18px; }
</style>
</head>
<body>

<h1>–°–ª–æ—Ç –º–∞—à–∏–Ω–∞</h1>
<div id="slots">
  <div class="slot">üéÅ</div>
  <div class="slot">üéÅ</div>
  <div class="slot">üéÅ</div>
  <div class="slot">üéÅ</div>
  <div class="slot">üéÅ</div>
  <div class="slot">üéÅ</div>
</div>
<button id="spinBtn">–ö—Ä—É—Ç–∏—Ç—å üé∞</button>
<div id="result"></div>

<script>
  const slots = document.querySelectorAll('.slot');
  const spinBtn = document.getElementById('spinBtn');
  const resultDiv = document.getElementById('result');

  const symbols = ['üéÅ', 'üíé', 'üéâ', 'üçÄ', '‚≠êÔ∏è', 'üç¨'];

  function spin() {
    spinBtn.disabled = true;
    resultDiv.textContent = '–ö—Ä—É—Ç–∏–º...';

    let spinsCount = 20;
    let interval = 100;
    let currentSpin = 0;

    let animation = setInterval(() => {
      slots.forEach(slot => {
        const sym = symbols[Math.floor(Math.random() * symbols.length)];
        slot.textContent = sym;
      });

      currentSpin++;
      if(currentSpin >= spinsCount) {
        clearInterval(animation);
        let arr = Array.from(slots).map(s => s.textContent);
        let win = checkWin(arr);
        if(win) {
          resultDiv.textContent = 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!';
        } else {
          resultDiv.textContent = '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!';
        }

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram WebApp, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
        if(window.Telegram && Telegram.WebApp && Telegram.WebApp.sendData) {
          Telegram.WebApp.sendData(JSON.stringify({slots: arr, win: win}));
        }

        spinBtn.disabled = false;
      }
    }, interval);
  }

  function checkWin(arr) {
    let count = 1;
    for(let i = 1; i < arr.length; i++) {
      if(arr[i] === arr[i-1]) {
        count++;
        if(count >= 3) return true;
      } else {
        count = 1;
      }
    }
    return false;
  }

  spinBtn.onclick = spin;

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
  if(window.Telegram && Telegram.WebApp && Telegram.WebApp.ready) {
    Telegram.WebApp.ready();
  }
</script>

</body>
</html>
